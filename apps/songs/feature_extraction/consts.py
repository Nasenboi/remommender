import os

GENRES = [
    "rock",
    "pop",
    "alternative",
    "indie",
    "electronic",
    "dance",
    "alternative rock",
    "jazz",
    "metal",
    "chillout",
    "classic rock",
    "soul",
    "indie rock",
    "electronica",
    "folk",
    "chill",
    "instrumental",
    "punk",
    "blues",
    "hard rock",
    "ambient",
    "acoustic",
    "experimental",
    "Hip-Hop",
    "country",
    "easy listening",
    "funk",
    "electro",
    "heavy metal",
    "Progressive rock",
    "rnb",
    "indie pop",
    "House",
]

MODEL_PATH = os.getenv("MODEL_PATH", "/run/media/chr1s/chr1sdrive1/MuInf/Models/")

ML_MODELS = {
    "bpm": f"{MODEL_PATH}deeptemp-k16-3.pb",
    "voice": f"{MODEL_PATH}voice_instrumental-musicnn-msd-2.pb",  # voice[1]
    "female": f"{MODEL_PATH}gender-musicnn-msd-2.pb",  # female[0]
    "danceability": f"{MODEL_PATH}danceability-musicnn-msd-2.pb",  # danceable[0]
    "tonal": f"{MODEL_PATH}tonal_atonal-musicnn-msd-2.pb",  # tonal[0]
    "genre": f"{MODEL_PATH}msd-musicnn-1.pb",
}

GENRE_INDEXES_TO_DELETE = [5, 7, 10, 13, 17, 19, 21, 25, 31, 32, 34, 35, 38, 39, 44, 47, 49]

GMBI_RF_MODELS = {
    "valence": f"{MODEL_PATH}gmbi_rf/valence_noBeat.joblib",
    "arousal": f"{MODEL_PATH}gmbi_rf/arousal_noBeat.joblib",
    "authenticity": f"{MODEL_PATH}gmbi_rf/authenticity_noBeat.joblib",
    "timeliness": f"{MODEL_PATH}gmbi_rf/timeliness_noBeat.joblib",
    "complexity": f"{MODEL_PATH}gmbi_rf/complexity_noBeat.joblib",
}

GMBI_MODELS = {
    "valence": f"{MODEL_PATH}gmbi_old_nn/valence",
    "arousal": f"{MODEL_PATH}gmbi_old_nn/arousal",
    "authenticity": f"{MODEL_PATH}gmbi_old_nn/authenticity",
    "timeliness": f"{MODEL_PATH}gmbi_old_nn/timeliness",
    "complexity": f"{MODEL_PATH}gmbi_old_nn/complexity",
}


TO_DELETE_FROM_JSON = [
    "barkbands",
    "bpm",
    "first_peak_bpm",
    "second_peak_bpm",
    "histogram",
    "beats_position",
    "bpm_estimates",
    "bpm_intervals",
    "onset_times",
    "chords_histogram",
    "thpcp",
    "chords_key",
    "chords_scale",
    "key_key",
    "key_scale",
    "chords_progression",
]

TO_DELETE_FROM_DF = [
    "tristimulus_min_0",
    "tristimulus_min_1",
    "tristimulus_min_2",
    "tristimulus_max_0",
    "tristimulus_max_1",
    "tristimulus_max_2",
    "oddtoevenharmonicenergyratio_min",
    "inharmonicity_min",
    "inharmonicity_max",
    "second_peak_weight_stdev",
    "second_peak_spread_stdev",
    "second_peak_spread_min",
    "second_peak_spread_median",
    "second_peak_spread_mean",
    "second_peak_spread_max",
    "first_peak_weight_stdev",
    "first_peak_spread_stdev",
    "spectral_strongpeak_min",
    "spectral_complexity_min",
    "silence_rate_60dB_min",
    "silence_rate_60dB_median",
    "silence_rate_60dB_max",
    "silence_rate_30dB_min",
    "silence_rate_30dB_median",
    "silence_rate_30dB_max",
    "silence_rate_20dB_median",
    "silence_rate_20dB_min",
    "silence_rate_20dB_max",
]

BEAT_LOUDNESS = [
    "beats_loudness_band_ratio_max_2",
    "beats_loudness_stdev",
    "beats_loudness_band_ratio_min_5",
    "beats_loudness_band_ratio_min_2",
    "beats_loudness_band_ratio_mean_2",
    "beats_loudness_band_ratio_min_4",
    "beats_loudness_mean",
    "beats_loudness_band_ratio_mean_1",
    "beats_loudness_band_ratio_max_5",
    "beats_loudness_band_ratio_max_3",
    "beats_loudness_band_ratio_stdev_2",
    "beats_loudness_band_ratio_mean_5",
    "beats_loudness_band_ratio_median_0",
    "beats_loudness_max",
    "beats_loudness_band_ratio_stdev_5",
    "beats_loudness_min",
    "beats_loudness_band_ratio_min_1",
    "beats_loudness_band_ratio_mean_4",
    "beats_loudness_band_ratio_median_5",
    "beats_loudness_band_ratio_max_0",
    "beats_loudness_band_ratio_stdev_1",
    "beats_loudness_band_ratio_stdev_0",
    "beats_loudness_band_ratio_mean_0",
    "beats_loudness_band_ratio_min_0",
    "beats_loudness_band_ratio_mean_3",
    "beats_loudness_band_ratio_max_4",
    "beats_loudness_band_ratio_median_2",
    "beats_loudness_band_ratio_stdev_4",
    "beats_loudness_band_ratio_median_3",
    "beats_loudness_band_ratio_median_1",
    "beats_loudness_band_ratio_median_4",
    "beats_loudness_band_ratio_min_3",
    "beats_loudness_band_ratio_stdev_3",
    "beats_loudness_median",
    "beats_loudness_band_ratio_max_1",
]

FEATURES_MUSIC_EXTRACTOR = [
    "lowlevel.spectral_centroid.max",
    "lowlevel.spectral_centroid.min",
    "lowlevel.spectral_centroid.median",
    "lowlevel.spectral_centroid.mean",
    "lowlevel.spectral_centroid.stdev",
    "lowlevel.spectral_rolloff.max",
    "lowlevel.spectral_rolloff.min",
    "lowlevel.spectral_rolloff.median",
    "lowlevel.spectral_rolloff.mean",
    "lowlevel.spectral_rolloff.stdev",
    "lowlevel.spectral_flux.max",
    "lowlevel.spectral_flux.min",
    "lowlevel.spectral_flux.median",
    "lowlevel.spectral_flux.mean",
    "lowlevel.spectral_flux.stdev",
    "lowlevel.melbands_crest.max",
    "lowlevel.melbands_crest.min",
    "lowlevel.melbands_crest.median",
    "lowlevel.melbands_crest.mean",
    "lowlevel.melbands_crest.stdev",
    "lowlevel.mfcc.mean",
]

# additional features, that are not in Essentias MusicExtractor (13 mfccs are in MusicExtractor, but are getting individual names here)
FEATURES_ADDITIONAL = [
    "mfcc_1",
    "mfcc_2",
    "mfcc_3",
    "mfcc_4",
    "mfcc_5",
    "mfcc_6",
    "mfcc_7",
    "mfcc_8",
    "mfcc_9",
    "mfcc_10",
    "mfcc_11",
    "mfcc_12",
    "mfcc_13",
    "rmsWaveForm",
    "bpm",
    "danceable",
    "voice",
    "tonal",
    "female",
]

MERGE_FEATURES = [*FEATURES_MUSIC_EXTRACTOR, *FEATURES_ADDITIONAL]
GMBI_INFERENCE_FEATURES = MERGE_FEATURES.remove("lowlevel.mfcc.mean")

# z-Standardisierung from GMBI Training dataset
GMBI_TRAIN_MEAN = [
    4304.467516882324,
    261.74677831573484,
    1260.9834733947755,
    1359.8331622497558,
    635.9399246307373,
    10285.1708203125,
    80.66337890625,
    1028.98564453125,
    1520.3353218078614,
    1634.8734796264648,
    0.39592601194083693,
    0.000708590870954787,
    0.08244796831775457,
    0.10030800342559815,
    0.06753226600438356,
    33.117014208221434,
    4.244641485500336,
    16.40874999732971,
    16.9565301448822,
    6.161106257915497,
    -656.0196318847657,
    118.92494503326417,
    10.447095110334455,
    21.845709711566567,
    7.000801872124336,
    6.495225010318309,
    2.651624589442462,
    5.124417172216624,
    1.2524997454084457,
    3.597588812500582,
    0.1687594781305641,
    0.8034831906133332,
    -0.28256157128149645,
    0.21183581947386265,
    116.5172,
    0.20131734738808008,
    0.7907550511702895,
    0.44773288787677884,
    0.5534380101077025,
    0.7113106577267405,
    0.28381864464345935,
]

GMBI_TRAIN_STDV = [
    1384.9670265215545,
    183.2666812918937,
    519.4086411089112,
    459.9783269373903,
    219.80002148102415,
    3148.929935868467,
    43.404677893428534,
    680.2361034285709,
    710.1270314805328,
    771.7700180865388,
    0.11644394110959715,
    0.00038664404428150745,
    0.02231384189017726,
    0.02255657241125257,
    0.02228985539668799,
    3.4861420970718413,
    1.2034036918184805,
    4.198400071505198,
    3.6131573724981783,
    1.536543218984324,
    59.07438977889181,
    35.52153093715034,
    21.94055368632451,
    13.469497097426842,
    9.708297172352388,
    9.344183931551497,
    8.21357488329068,
    6.930678857265335,
    6.273217794176767,
    5.53465714477443,
    5.1220975016929025,
    4.672487099095496,
    4.460216908839947,
    0.052428397131584974,
    24.295433812961722,
    0.25085396280902705,
    0.2593542864541213,
    0.28159425945911337,
    0.2810039921374059,
    0.3499780226533626,
    0.34698674540391083,
]
